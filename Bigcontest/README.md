# 빅콘테스트  데이터분석 '퓨처스리그'

## 프로젝트 명 : KBO 정규시즌 잔여 경기에 대한 각 팀별 승률, 타율 및 방어율 예측
- 진행 기간: 2020.07.20 ~ 2020.09.28

## 1. 개발 배경 :question:
- 데이터 분석 프로젝트를 경험해보면 실력 향상에 좋은 경험이 될 것이라는 생각에 팀을 구성 후 대회에 참여하게 됨.
- 혼자서 하는 프로젝트가 아닌 팀 협업 활동은 처음이므로 나를 더 발전시킬 수 있는 좋은 계기라고 생각함.
- 평소 KBO에 관심이 많아서 더욱 분석에 흥미를 가짐.

| **방어율, 타율 예측** | **승률 예측** |
| :-----------: | :-----------: |
| LSTM | 피타고리안 승률 계산식 |

- 승률 계산식: `x = ((득점 + 실점) / 경기 수) ^ 0.287` , `승률(PV) = 득점 ^x / (득점 ^x + 실점 ^x)`
- 데이터는 스포츠투아이에서 2016~2020년 상반기까지 데이터를 제공해주었음.

## 2. 역할 :two_men_holding_hands:
> **김건**
- 분석 방향 설계, 예측률을 높이기 위한 분석 방안 모색, 데이터 전처리, LSTM 모델 구현

> **박OO**
- 분석 방향 설계, 데이터 전처리, LSTM 모델 구현

> **박OO, 석OO, 한OO**
- 분석 방향 설계, 추가 데이터 수집, PPT 작성

## 3. 시스템 사용 Tool
<div>
  <img width="200" src="https://github.com/GeonKimdcu/SideProject/blob/main/Arc-Fault/_img/ppy.PNG">
</div>

## 4. 변수 소개
- GAME: 경기 수
- GDAY_DS: 경기 일자
- T_ID: 팀 코드
- VS_T_ID: 상대팀 코드
- AB: 투구 수
- RUN: 실점
- HIT: 안타 개수
- INN2: 이닝 * 3
- R: 득점
- ER: 자책점

## 5. 프로젝트 요약
- R을 사용하여 타율, 방어율, 승률에 연관성이 있는 데이터 수집 후 T_ID를 기준으로 데이터를 정렬(팀과 팀간의 상성을 확인하기 위해)
- T_ID로 분류한 데이터를 팀 및 연도별 파생 변수 생성
- 데이터 분류 후 불필요한 데이터 삭제
- 144경기를 4개 구간으로 나누어줌. (연도 별 시간에 따른 팀 성적에 패턴을 보고 2020년의 경기를 예측하려 하였으나, 코로나로 인해 경기가 지연되면서 기존의 데이터와 2020년 데이터간의 날짜의 상관성이 사라짐. 따라서 경기 수를 기준으로 분석하고자 함 => **LSTM** 기법 사용한 이유)
- LSTM 모델 생성 및 컴파일 후 팀 별 타율, 방어율, 그리고 득실점을 예측함. 예측되어진 득실점을 이용해 피타고리안 승률 계산식에 대입해 승률 예측


## 6. requirement
```
python==3.7
matplotlib==3.2.2
numpy==1.18.5
pandas==1.0.5
scipy==1.4.1
sklearn==0.0
tensorflow==2.3.1
```

## 7. 프로젝트 진행 과정 :bulb:

- **`210104-210108`**
  - 연구과제 관련 미팅
  - '신호처리', 'Arc-Fault' study
- **`210111-210115`**
  - 'Arc-Fault' 가상 signal 생성
  - 가상 Arc signal 피드백(Ph.D. & me)
  - 데이터 종류(Normal, Arc1, Arc2) 당 20개의 데이터 추출 (max, mean, std, max-min-diff)
- **`210118-210122`**
  - 'FFT, STFT, WT' study
  - 'transform'한 signal feature 추출(Spectrum 값 및 변화 특성)
  - 데이터 feature간의 상관관계 분석 후 VIF를 통한 변수 선택법, PCA 적용
- **`210125-210129`**
  - Class 불균형 해소 위한 SMOTE 기법을 통한 Oversampling 적용
  - SVM 모델 구현 및 평가. 피드백(Ph.D. & me)
- **`210201-210205`**
  - Time Series Data 생성 및 Preprocessing
  - 연구과제 관련 미팅
- **`210208-210210`**
  - KNN 알고리즘을 통한 Anomaly Detection 구현
  - 구현 모델 피드백(Ph.D. & me)
- **`210216-210219`**
  - Wavelet Packet Transform 관련 논문 정리
  - WPT를 사용해 고역통과필터로 분해된 주파수 성분들로 window 별 maximum peak value추출
  - peak 값을 통해 window 별 ratio로 값 생성
  - threshold를 설정 후, 주어진 신호에서 Arc-Fault를 검출해 단계별 'safety / caution / warning' 상태 출력
- **`210222-210226`**
  - 코드 주석 정리 및 코드 상세 내용 문서화 후 코드 관련 Q&A(Ph.D & me)
